<!DOCTYPE html>
<html>
<head>
  <title>Audio Train</title>
</head>
<body>
  <p id="sentence">चिकन मोमोज़ चाहिए</p>
  <button id="recordButton">Record</button>
  <button id="doneButton" disabled>Done</button>

  <script>
    var audioChunks = [];
    var audioSentence = "चिकन मोमोज़ चाहिए";

    // Create a dictionary of the sentences
    var sentences = {};
    sentences["चिकन मोमोज़ चाहिए"] = true;
    sentences["मुझे चिकन मोमोज़ और एक आइस टी चाहिए"] = true;
sentences["चिकन मोमोज़ भी देदो"] = true;
sentences["मुझे तीन चिकन मोमोज़ चाहिए"] = true;
sentences["मुझे चिकन मोमोज़ की एक प्लेट चाहिए।"] = true;
sentences["एक प्लेट चिकन मोमोज़ चाहती हूँ।"] = true;
sentences["कृपया मुझे चिकन मोमोज़ दें।"] = true;
sentences["चिकन मोमोज़ का एक प्लेट देना।"] = true;
sentences["मुझे 2 चिकन मोमोज़ चाहिए और साथ में 2 आइस टी।"] = true;
sentences["एक और प्लेट चिकन मोमोज़ ऐड करदो और साथ में एक कोक भी करदो"] = true;
sentences["तीन चिकन मोमोज़"] = true;
sentences["चिकन मोमोज़ एक फ्रूट बियर और आइसटी करदो"] = true;
sentences["4 वेज मोमोज़ और कोक के साथ चिकन मोमोज़ 4 प्लेट्स"] = true;
sentences["एक चिकन मोमोज़ करदो"] = true;
sentences["सात चिकन मोमोज़ करदो।"] = true;
sentences["वेज मोमोज़ एंड चिकन मोमोज़"] = true;
sentences["चिकन क्लियर सूप की जगह वेज क्लियर सूप"] = true;
sentences["फ्रूट बियर हटाकर कोक करदो"] = true;
sentences["आठ की जगह कोक नौ करदो"] = true;
sentences["चिकन मोमोज की जगह कोक चाहिए मेरे को"] = true;
sentences["चार की जगह फ्रूट बीयर पांच करदो"] = true;
sentences["वेज मोमोज़ की जगह चिकन मोमोज़ कर दो"] = true;
sentences["पनीर मोमोज़ की जगह वेज मोमोज़"] = true;
sentences["दो पनीर मोमोज़ करदो।"] = true;
sentences["पनीर मोमोज़ चाहिए"] = true;
sentences["मुझे पनीर मोमोज़ और एक आइस टी चाहिए"] = true;
sentences["पनीर मोमोज़ भी देदो"] = true;
sentences["मुझे तीन पनीर मोमोज़ चाहिए"] = true;
sentences["मुझे पनीर मोमोज़ की एक प्लेट चाहिए।"] = true;
sentences["एक प्लेट पनीर मोमोज़ चाहती हूँ।"] = true;
sentences["कृपया मुझे पनीर मोमोज़ दें।"] = true;
sentences["पनीर मोमोज़ का एक प्लेट देना।"] = true;
sentences["मुझे 2 पनीर मोमोज़ चाहिए और साथ में 2 आइस टी।"] = true;
sentences["चिकन क्लियर सूप की जगह वेज क्लियर सूप"] = true;
sentences["एक और प्लेट वेज मोमोज़ ऐड करदो और साथ में एक और वेज क्लियर सूप भी करदो।"] = true;
sentences["तीन फ्रूट बियर और चिकन क्लियर सूप चाहिए"] = true;
sentences["चिकन क्लियर सूप दो"] = true;
sentences["वेज क्लियर सूप ऐड करदो"] = true;
sentences["नौ चिकन क्लियर सूप करदो।"] = true;
sentences["मुझे एक वेज क्लियर सूप एक चिकन क्लियर सूप पनीर मोमोज और आईसटी कर दो"] = true;
sentences["मेरे को दो प्लेट वेज मोमोज सी है एक वेज क्लियर सूप और एक कोक"] = true;
sentences["वेज क्लियर सूप की जगह तीन चिकन क्लियर सूप कर दो"] = true;
sentences["मेरे लिए 3 वेज क्लियर सूप और 3 फ्रूट बियर करदो साथ में।"] = true;

    navigator.mediaDevices.getUserMedia({ audio: true }).then(function (stream) {
      var mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.ondataavailable = function (event) {
        audioChunks.push(event.data);
      };

      document.getElementById('recordButton').addEventListener('click', function () {
        mediaRecorder.start();
        document.getElementById('recordButton').disabled = true;
        document.getElementById('doneButton').disabled = false;
      });

      document.getElementById('doneButton').addEventListener('click', function () {
        mediaRecorder.stop();
        document.getElementById('recordButton').disabled = false;
        document.getElementById('doneButton').disabled = true;

        mediaRecorder.onstop = function () {
          var audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
          var reader = new FileReader();
          reader.onload = function () {
            var audioData = reader.result;
            var sentence = audioSentence;

            // Save the audio and sentence to a CSV file
            saveDataToCSV(audioData, sentence);

            // Load the next sentence from the dictionary
            loadNextSentence();
          };
          reader.readAsDataURL(audioBlob);
        };
      });
    });

    function loadNextSentence() {
      // Get the next sentence from the dictionary
      var nextSentence = Object.keys(sentences).find(function(sentence) {
        return sentences[sentence];
      });

      if (nextSentence) {
        // Set the sentence to be recorded
        audioSentence = nextSentence;

        // Mark the sentence as recorded
        sentences[nextSentence] = false;

        // Update the UI to display the next sentence
        document.getElementById('sentence').textContent = audioSentence;
      } else {
        // All sentences are completed
        document.getElementById('sentence').textContent = "All sentences completed";
      }
    }

    function saveDataToCSV(audioData, sentence) {
      var csvContent = sentence + ',' + audioData + '\n';

      // Create a Blob from the CSV content
      var blob = new Blob([csvContent], { type: 'text/csv' });

      // Create a temporary link element to trigger the download
      var link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'audio_data.csv';
      link.click();
    }
  </script>
</body>
</html>
